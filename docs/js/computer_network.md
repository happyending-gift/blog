---
title: 计算机网络
author: chengp
---


## 从输入 URL 到页面展示的过程

当用户在浏览器中输入一个 URL 并按下回车键时，以下一系列步骤会发生：

1. **DNS 解析**：
    - 浏览器首先检查本地 DNS 缓存，以确定 URL 对应的 IP 地址。
    - 如果找不到，它会向 DNS 服务器查询。

2. **建立 TCP 连接**：
    - 通过三次握手过程，浏览器与服务器建立 TCP 连接。

3. **发送 HTTP 请求**：
    - 一旦 TCP 连接建立，浏览器会构建一个 HTTP 请求并发送给服务器。

4. **服务器处理请求**：
    - 服务器接收到请求后，会根据请求的 URL、HTTP 方法（如 GET、POST）和头部信息来处理请求。

5. **发送 HTTP 响应**：
    - 服务器处理完请求后，会发送一个 HTTP 响应，包括状态码、响应头部和正文（即所请求的页面内容）。

6. **浏览器渲染页面**：
    - 浏览器接收到响应后，会解析 HTML 文档，并根据 HTML、CSS 和 JavaScript 来渲染页面。

7. **关闭 TCP 连接**：
    - 在 HTTP/1.0 中，默认使用非持久连接，每次请求后都会关闭 TCP 连接。
    - 在 HTTP/1.1 中，默认使用持久连接，可以复用同一个 TCP 连接来发送多个请求和响应。



## TCP三次握手与四次挥手

### TCP三次握手

TCP 三次握手是建立一个可靠 TCP 连接的过程，它包括以下步骤：

1. **SYN（同步序列编号）**：
    - 客户端发送一个带有 SYN 标志的 TCP 段到服务器，以初始化序列号。

2. **SYN-ACK（同步序列编号和确认应答）**：
    - 服务器收到 SYN 后，同意建立连接，并发送一个带有 SYN 和 ACK 标志的 TCP 段作为响应。

3. **ACK（确认应答）**：
    - 客户端收到 SYN-ACK 后，发送一个带有 ACK 标志的 TCP 段作为最后的确认。

完成这三个步骤后，TCP连接就建立成功，数据可以开始传输。

### TCP四次挥手

TCP 四次挥手是终止一个 TCP 连接的过程，它包括以下步骤：

1. **FIN（结束）**：
    - 客户端发送一个带有 FIN 标志的 TCP 段，表示客户端已经发送完所有数据，请求关闭连接。

2. **ACK（确认应答）**：
    - 服务器收到 FIN 后，发送一个 ACK 段作为确认，同时准备好关闭连接。

3. **FIN（结束）**：
    - 服务器也发送一个带有 FIN 标志的 TCP 段，表示它已经准备好关闭连接。

4. **ACK（确认应答）**：
    - 客户端收到服务器的 FIN 后，发送最后一个 ACK 段作为确认。
